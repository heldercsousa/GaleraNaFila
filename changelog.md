# Changelog - MyKaraoke

## Objetivo do App

O MyKaraoke é um aplicativo .NET MAUI para gerenciar filas de participantes em rodadas de karaokê. Permite criar novas filas, acompanhar o status das filas em andamento e consultar filas já encerradas, facilitando a organização dos eventos e a experiência dos participantes.

---

## Histórico de Mudanças
- **20/06/2025** - Evolutiva - Criação do projeto inicial e definição do objetivo do aplicativo.
- **20/06/2025** - Evolutiva - Adicionado recurso de gradiente horizontal reutilizável (de #221b3c à esquerda até #331e6e à direita) para fundo de tela em toda a aplicação e aplicado na HomePage.
- **20/06/2025** - Evolutiva - SplashPage atualizada: texto "FILA KARAOKÊ" centralizado com gradiente (#d5528a → #9047ac), texto "Gerenciamento inteligente" abaixo em branco, SplashPage ativada como tela inicial e removida a splashscreen azul padrão do .NET MAUI no Android.
- **20/06/2025** - Evolutiva - Implementação da SplashPage com layout atualizado.
- **20/06/2025** - Correção - Corrigido erro de uso de LinearGradientBrush em Label.TextColor na SplashPage (não suportado pelo .NET MAUI 8). Agora o texto "FILA KARAOKÊ" com gradiente é exibido via GraphicsView e GradientTextDrawable. Ajustado o namespace do recurso em Styles.xaml.
- **20/06/2025** - Correção - Corrigido GradientTextDrawable.cs: ajustada a ordem dos parâmetros de GradientStop (Color, float) e uso explícito do namespace para Font, eliminando erros de compilação.
- **20/06/2025** - Correção - Corrigido namespace e visibilidade da classe GradientTextDrawable e referência no Styles.xaml para garantir reconhecimento do recurso customizado no XAML.
- **20/06/2025** - Evolutiva - Removido todo o código relacionado ao preenchimento gradiente do texto do título na SplashPage. Agora o título é exibido como imagem, garantindo compatibilidade e visual fiel ao design.
- **20/06/2025** - Evolutiva - Removido o código de gradiente em texto e adicionado a imagem 'filakaraoke.png' como título da SplashPage, conforme o preview visual desejado.
- **20/06/2025** - Evolutiva - Ajustada a SplashPage para que a imagem do título ocupe aproximadamente 2/3 da largura da tela, centralizada, e o texto "Gerenciamento inteligente" fique alinhado à esquerda da imagem, com tamanho de fonte menor e mais próximo do visual do preview.
- **21/06/2025** - Evolutiva - Simplificada a SplashPage: removida a imagem filakaraoke.png e o texto "Gerenciamento inteligente". Adicionada a imagem mykaraokesplashpage.jpg ocupando toda a tela para uma experiência visual mais impactante.
- **21/06/2025** - Evolutiva - Implementado suporte completo a múltiplos idiomas (localização). Adicionados recursos de tradução para 11 idiomas: inglês (padrão), português do Brasil, espanhol, francês, alemão, chinês simplificado, japonês, coreano, árabe, russo e hindi.
- **21/06/2025** - Evolutiva - Criada classe `ServiceProvider` para simplificar o acesso aos serviços registrados no container DI. Implementados métodos `FromPage` e `GetService<T>` para obter serviços tipados com verificação de nulidade. Refatorada a `SplashPage` para utilizar o `ServiceProvider` em vez de injeção direta no construtor, simplificando a criação de páginas.
- **21/06/2025** - Evolutiva - Adaptado o arquivo App.xaml.cs para usar o novo ServiceProvider, eliminando a necessidade de injeção explícita de serviços na inicialização das páginas.
- **21/06/2025** - Evolutiva - Refatorada a classe `StackPage` para utilizar o ServiceProvider, eliminando a necessidade de injeção de dependência via construtor. Adicionado método OnHandlerChanged para inicializar os serviços quando o Handler estiver disponível.
- **21/06/2025** - Evolutiva - Refatorada a classe `TonguePage` para utilizar o ServiceProvider, eliminando a dependência de injeção via construtor. Corrigido problema de referência nula na SplashPage com verificações de disponibilidade do Handler.
- **21/06/2025** - Correção - Corrigidos erros de compilação CS7036 e CS0118 no App.xaml.cs: removidos parâmetros na criação da SplashPage para compatibilizar com a nova abordagem baseada em ServiceProvider.
- **21/06/2025** - Correção - Corrigidos erros persistentes de compilação: adicionada qualificação completa de namespace para SplashPage no App.xaml.cs, corrigido problema de nulidade no parâmetro do método CreateWindow, e garantida a atualização do construtor da SplashPage para não exigir parâmetros.
- **21/06/2025** - Evolutiva - Implementada a interface da TonguePage para seleção de idiomas com inglês pré-selecionado. Adicionado botão de confirmação que salva a preferência de idioma e navega para a StackPage. A interface exibe 6 línguas principais com layout em grid responsivo e destaca visualmente o idioma selecionado.
- **21/06/2025** - Evolutiva - Aprimorada a interface da TonguePage: aplicado o gradiente horizontal padrão (#221b3c → #331e6e) como background, reduzido o tamanho dos botões de idioma para melhor aproveitamento do espaço, e incluídos todos os 11 idiomas suportados (inglês, português, espanhol, francês, alemão, chinês simplificado, japonês, coreano, árabe, russo e hindi).
- **21/06/2025** - Correção - Corrigido erro "unable to open database file" na TonguePage, adicionando verificação de inicialização do banco de dados e mecanismo de fallback para usar preferências locais quando o banco não estiver disponível. Adicionado indicador de carregamento durante operações de banco de dados.
- **21/06/2025** - Evolutiva - Corrigido fluxo de navegação do aplicativo: agora sempre inicia pela SplashPage que decide entre TonguePage ou StackPage conforme a seleção prévia de idioma. Reduzido ainda mais o tamanho dos botões de seleção de idioma na TonguePage (45x100) e diminuído o espaçamento entre eles (margin: 5) para melhor utilização do espaço.
- **21/06/2025** - Evolutiva - Adicionado botão voltar (seta branca) na TonguePage que navega para StackPage. Alterado comportamento da seleção de idioma para não navegar automaticamente, apenas destacar visualmente o idioma escolhido. Modificado layout dos botões de idioma para ocuparem mais espaço na tela com margens laterais iguais (15 unidades), usando largura fixa de 165 unidades e margens internas de 3 unidades.
- **21/06/2025** - Evolutiva - Simplificada a interface da TonguePage: removido o texto explicativo "Selecione seu idioma", mantendo apenas o título "MyKaraoke" para uma interface mais limpa e intuitiva.
- **21/06/2025** - Evolutiva - Redesenhada a interface da TonguePage: reorganizados os botões de idiomas para exibirem um por linha com informações detalhadas e bandeiras de países; removido o botão "Confirmar" e implementada navegação direta ao selecionar um idioma; corrigido tratamento de erro na inicialização do banco de dados para evitar mensagens de erro; melhorado o design visual com mais espaçamento vertical.
- **21/06/2025** - Correção - Corrigidos erros XFC0009 e XLS0415 na TonguePage, substituindo o uso incorreto de Button.Content por Frames com TapGestureRecognizers para criar botões personalizados de idioma. Adicionado efeito de escala ao tocar nos botões para melhor feedback visual.
- **21/06/2025** - Evolutiva - Simplificada a interface da TonguePage: removido o botão "Confirmar" e implementada seleção e salvamento imediato do idioma ao tocar na opção desejada. Aprimorada integração com ILanguageService de forma assíncrona para persistência da configuração. Adicionada navegação automática para a StackPage após a seleção do idioma.
- **21/06/2025** - Evolutiva - Aperfeiçoada a TonguePage: adicionados os 5 idiomas faltantes (japonês, coreano, árabe, russo e hindi) completando os 11 idiomas suportados. Corrigido o comportamento do botão voltar e do botão físico do Android para navegar para a StackPage em vez de voltar/sair do aplicativo.
- **21/06/2025** - Evolutiva - Implementado padrão visual unificado com card de fundo semi-transparente na tela de idiomas. Aplicado design consistente com cards aninhados, bordas sutis e cantos arredondados. Os botões de idioma agora possuem fundo semi-transparente quando não selecionados e destaque em rosa quando selecionados. Este padrão visual será aplicado em todas as interfaces do aplicativo.
- **21/06/2025** - Evolutiva - Implementado padrão visual unificado com estilos reutilizáveis para cards e botões. Criados três estilos base: BaseCardStyle (fundo semi-transparente com bordas sutis), GradientButtonStyle (botões com gradiente de rosa para roxo) e SecondaryButtonStyle (botões semi-transparentes). Aplicado o novo padrão na TonguePage como exemplo inicial. Este padrão visual será usado em todas as interfaces do aplicativo para garantir consistência.
- **21/06/2025** - Correção - Corrigidos erros de compilação na TonguePage relacionados à estrutura XAML: resolvidos problemas com múltiplas definições de Content, fechamentos de tags ausentes e referências de nomes. Melhorada a estrutura geral do XAML para seguir as melhores práticas e garantir compatibilidade com o compilador XAML do .NET MAUI.
- **21/06/2025** - Evolutiva - Implementado padrão visual unificado com estilos reutilizáveis para cards e botões. Criados três estilos base: BaseCard
- **22/06/2025** - Correção - Corrigido problema de visualização na TonguePage onde os textos dos botões de idioma e as bandeiras não estavam aparecendo. Aprimorada a forma de adicionar elementos ao Grid, utilizando Grid.SetColumn explicitamente e configurando propriedades como ZIndex, TextColor e IsVisible. Adicionados novos estilos específicos para labels de idiomas e bandeiras. Implementado logging de depuração para rastrear e resolver problemas de renderização.
- **22/06/2025** - Correção - Corrigidos erros CS0165 e CS0019 na TonguePage relacionados ao uso de variáveis não atribuídas e operadores incorretos. Simplificada a implementação de criação de botões de idioma para garantir a visibilidade correta do texto e bandeiras. Melhorado o gerenciamento de cores e estilos sem depender de recursos externos que podem não estar sempre disponíveis.
- **22/06/2025** - Correção - Corrigidos erros de compilação CS0165 (uso de variável local não atribuída "gradient") e CS0019 (operador '&&' aplicado incorretamente) na TonguePage.xaml.cs. Refatorado o método CreateLanguageButtons para garantir checagens de nulidade corretas e melhorar a visibilidade do texto e das bandeiras nos botões de seleção de idioma.
- **22/06/2025** - Evolutiva - Aprimorada a experiência de seleção de idioma na TonguePage: (1) Modificado o comportamento para não salvar a seleção de idioma ao clicar em um botão, apenas ao confirmar através do diálogo; (2) Implementada tradução dinâmica do título "Language" conforme o idioma selecionado; (3) Adicionado diálogo de confirmação em inglês ao tentar sair da página, exibindo o nome do idioma em inglês e na língua nativa; (4) Ajustado o padding interno dos botões de idioma para alinhamento visual com as linhas de referência. Aprimorado também o suporte a idiomas RTL como árabe com alinhamento apropriado do texto.
- **22/06/2025** - Correção - Corrigidos múltiplos erros de ambiguidade CS0229 relacionados ao "titleLabel" na TonguePage.xaml.cs. Renomeado o elemento no XAML para "languageTitleLabel" para evitar conflitos. Implementadas as solicitações de: (1) Não salvar idioma no banco ao clicar em um botão de idioma; (2) Atualização do título para exibir a tradução da palavra "Language" no idioma selecionado; (3) Adição de diálogo de confirmação em inglês ao pressionar o botão voltar; (4) Ajuste do padding interno dos botões de idioma para 30 unidades. Adicionado suporte correto para idiomas RTL como o árabe.
- **22/06/2025** - Correção - Resolvidos os problemas de ambiguidade remanescentes na TonguePage. Renomeado o Label do título para "headerLabel" no arquivo XAML e no código C#, eliminando os erros CS0102 e CS0229. Garantida a consistência da experiência de seleção de idioma com tradução imediata do título, mas salvamento apenas mediante confirmação explícita. Mantido o padding interno de 30 unidades nos botões de idioma e suporte a idiomas RTL.
- **22/06/2025** - Correção - Corrigida a ambiguidade remanescente na TonguePage. Renomeado o Label do título de "headerLabel" para "titleText" no arquivo XAML e no código C#, eliminando os erros CS0102 e CS0229. Esta renomeação resolve os erros de compilação enquanto mantém a funcionalidade implementada anteriormente, incluindo a tradução dinâmica do título e o suporte a layout RTL para idiomas como árabe.
- **22/06/2025** - Evolutiva - Estabelecido padrão global de estilo visual para toda a aplicação, baseado na implementação bem-sucedida da TonguePage: (1) Background principal com gradiente horizontal de #221b3c para #331e6e; (2) Cards com bordas sutis #533682 e fundo semi-transparente com gradiente #362c58 para #3b2c6c; (3) Botões selecionados com gradiente #e52067 para #904ab4; (4) Botões não selecionados com cor sólida #4c426f e borda #6c4794; (5) Títulos de cards em rosa #e91e63 com ícones em frames circulares; (6) Posicionamento consistente do botão voltar no canto superior esquerdo. Este padrão visual será aplicado em todas as telas subsequentes do aplicativo para garantir uma experiência de usuário coesa e agradável.
- **23/06/2025** - Evolutiva - Modificado o fluxo de navegação entre modos do aplicativo: o botão "Mudar para Modo Participante" na StackPage agora navega para a PersonPage em vez da TonguePage, estabelecendo um fluxo mais intuitivo entre os modos Admin e Participante. Os usuários agora podem alternar entre os dois modos diretamente, sem passar pela tela de seleção de idiomas.
- **03/07/2025** - Evolutiva - Implementado botão voltar na StackPage seguindo o padrão visual da TonguePage: adicionado botão com texto "←" e estilo BackButtonStyle no canto superior esquerdo. Aplicado background com gradiente padrão AppBackgroundGradient e desabilitada a barra de navegação nativa (NavigationPage.HasNavigationBar="False"). Implementada funcionalidade de saída da aplicação ao pressionar o botão voltar da UI ou o botão físico do Android através do método ExitApplication() que utiliza Application.Current?.Quit(). Ajustadas as definições de linha do Grid para acomodar o novo botão voltar mantendo o layout existente.
- **03/07/2025** - Correção - Aprimorado o método OnSwitchToSimpleModeClicked na StackPage para garantir navegação robusta para a PersonPage: adicionada verificação de disponibilidade do ServiceProvider, tratamento de exceções com try-catch, e implementado fallback para criação direta de PersonPage caso o ServiceProvider falhe. Adicionado logging de depuração para rastrear erros de navegação, assegurando que o botão "Mudar para Modo Participante" sempre carregue a PersonPage corretamente.
- **03/07/2025** - Evolutiva - Refatorada a PersonPage para adotar o padrão ServiceProvider do StackPage: removidos parâmetros do construtor (QueueService e IServiceProvider), implementado construtor sem argumentos, adicionado método OnHandlerChanged para inicializar serviços quando Handler estiver disponível. Modificado OnSwitchToAdminModeClicked para usar ServiceProvider com verificação de disponibilidade, tratamento de exceções e fallback para criação direta de StackPage. Esta refatoração elimina a necessidade de injeção de dependência via construtor, padronizando a criação de páginas no aplicativo.
- **03/07/2025** - Evolutiva - Implementado padrão visual unificado na PersonPage seguindo o modelo da TonguePage: aplicado gradiente de fundo AppBackgroundGradient e desabilitada a barra de navegação nativa. Removidos labels "Galera Na Fila", "Fila" e "Modo Participante", bem como o botão "Mudar para Modo Admin" e seu respectivo code behind. Adicionado botão voltar com BackButtonStyle que navega para StackPage tanto pelo clique quanto pelo botão físico do Android. Implementado card com bordas sutis envolvendo o formulário de adição de participantes, com título "Adicionar Participante" em cor rosa (#e91e63) seguindo o padrão CardTitleStyle. Aplicado GradientButtonStyle ao botão "Adicionar à Fila" e melhorada a exibição de mensagens de validação. Esta padronização visual garante consistência em toda a aplicação.